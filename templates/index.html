<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
</head>

<body>
  <script src="https://p.trellocdn.com/power-up.min.js"></script>
  <script>
    TrelloPowerUp.initialize({
      'card-buttons': function (t, options) {
        return [
          {
            icon: "https://i.ibb.co/6sbknH0/logo-stroke-32pt-style-2-no-stroke.png",
            text: "Hello World!",
            callback: async function (t) {
              try {
                // Fetch data from the JSONPlaceholder API
                const response = await fetch('https://flask-production-330b.up.railway.app/');
                const data = await response.json();
  
                // Get the title of the post
                const message = data.message;
  
                // Get the card's id and name, and display the alert
                const card = await t.card('id', 'name');
                alert(`Hello from ${card.name} (id: ${card.id})! Message From The Back End Function: ${message}`);
              } catch (error) {
                console.error('Error fetching data:', error);
              }
            }
          },
          {
            icon: "https://example.com/your-icon.png",
            text: "Show Card Info",
            callback: async function (t) {
              const card = await t.card('id', 'name');
  
              // Create a modal and display card info
              return t.modal({
                title: 'Card Info',
                url: 'https://example.com/modal-content?cardId=' + card.id + '&cardName=' + card.name,
                fullscreen: true,
              });
            }
          }
        ];
      },
    });
  </script>
</body>

</html>
